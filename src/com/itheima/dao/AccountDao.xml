<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.itheima.dao.AccountDao" >

    <!--插入消费记录-->
    <insert id="addAccount" parameterType="java.util.Map">
        insert into account(user_id,type,money,time,beizhu) value(#{user_id},#{type},#{money},#{time},#{beizhu})
    </insert>

    <!--查询消费记录属于那个用户-->
    <select id="findAU" parameterType="Integer" resultMap="AccountUser">
        select a.*,u.username,u.pseudonym from account a,user u where a.user_id=u.user_id and a.account_id=#{id}
    </select>
    <resultMap id="AccountUser" type="Account">
        <id property="account_id" column="account_id"></id>
        <result property="type" column="type"></result>
        <result property="money" column="money"></result>
        <result property="time" column="time"></result>
        <result property="beizhu" column="beizhu"></result>
        <collection property="user" ofType="User">
            <id property="user_id" column="user_id"></id>
            <result property="username" column="username"></result>
            <result property="password" column="password"></result>
            <result property="nickname" column="nickname"></result>
            <result property="pseudonym" column="pseudonym"></result>
            <result property="status" column="status"></result>
        </collection>
    </resultMap>

</mapper>